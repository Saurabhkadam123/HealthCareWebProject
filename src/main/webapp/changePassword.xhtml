<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link rel="stylesheet"
		href="https://unpkg.com/primeflex@2.0.0/primeflex.css" />

	<style>
body {
    margin: 0px;
	padding: 0px;
	background-color: AZURE;
	background-size: cover no-repeat;
	color: #fff;
	background-image: url(#{request.contextPath}/image/dr.png);
}

input[type=text]:focus {
	transition: width 0.4s ease-in-out;
}

#img {
	width: 450px;
	margin-left: 120px;
}

.signupForm {
	margin-left: 120px;
	margin-top: 50px;
	box-shadow: 10px 10px 5px darkgrey;
	width: 500px;
	border-radius: 20px;
}
</style>
<style type="text/css">
    body .ui-staticmessage.ui-message {
        width: 100%;
    }
</style>
</h:head>
<h:body>
	 <center> 
		<h3>
			<h:outputLabel value="#{err}" style="color:red" />
			
		</h3>
		<f:facet name="last">
			<h:outputStylesheet library="default" name="css/style.css" />
			<h:outputStylesheet library="webjars"
				name="font-awesome/5.12.0/css/all.min-jsf.css" />
			<h:outputStylesheet library="webjars"
				name="font-awesome/5.12.0/css/v4-shims.min-jsf.css" />
		</f:facet>

		<div class="signupForm">
			<h:form>
				<p:panel id="panel-signup">
					<!-- enable focus component -->
					<p:focus context="panel-signup" />
					<h1
						style="color: Blue; width: 450px; box-shadow: 10px 10px 5px darkgrey;">
						Admin Reset Password</h1>
					<br />
					<div class="box">
					<p:outputLabel value="Username"
							styleClass="col-fixed" style="width:40px; margin-left:1px;"><span style="color: red;"> * </span></p:outputLabel>
					<div class="col">
						   <span class="pi pi-user"></span>
						<p:inputText readonly="true" id="userName" required="true" label="userName"
							size="38" requiredMessage="Please enter your username."
							value="#{login.username}">
							<f:validator validatorId="com.java.admin.UserValidation" />
						</p:inputText>
						<p:watermark for="userName" value="Username *" />
						<p:message for="userName" />
					</div>
					</div>
					 <br />
					
					
					<div class="box">
					<p:outputLabel value="Enter Old Password"
							styleClass="col-fixed" style="width:40px; margin-left:1px;"><span style="color: red;"> * </span></p:outputLabel>

					<div class="col">
						 <span class="pi pi-lock" style="font-size: 1rem"></span>
						<p:spacer></p:spacer>
						<p:spacer></p:spacer>
						<p:password id="Oldpassword" required="true" label="Oldpassword"
							size="35" requiredMessage="Please enter your Old password."
							value="#{login.password}" toggleMask="true"></p:password>
						<p:watermark for="Oldpassword" value="Oldpassword *" />
						<p:message for="Oldpassword" />
					</div>
					</div>
					
				 	<br/> 
					<div class="box">
					<p:outputLabel value="Enter New Password"
							styleClass="col-fixed" style="width:40px; margin-left:1px;"><span style="color: red;"> * </span></p:outputLabel>
					<div class="col">
						 <span class="pi pi-lock" style="font-size: 1rem"></span>
						<p:spacer></p:spacer>
						<p:spacer></p:spacer>
						<p:password id="password" required="true" label="password"
							size="35" requiredMessage="Please enter your New password."
							match="confirmPassword" value="#{lDao.newPass}" toggleMask="true" maxlength="13"></p:password>
						<p:watermark for="password" value="Enter New Password *" />
						<p:message for="password" />
					</div>
					</div>
				<br/> 
				<div class="box">
				<p:outputLabel value="Retype Password"
							styleClass="col-fixed" style="width:40px; margin-left:1px;"><span style="color: red;"> * </span></p:outputLabel>
				
					<div class="col">
						<span class="pi pi-lock" style="font-size: 1rem"></span>
						<p:spacer></p:spacer>
						<p:spacer></p:spacer>
						<p:password id="confirmPassword" required="true" size="35"
							requiredMessage="Please confirm New password."
							validatorMessage="Password should contain min 8 charactors and must contain one special charactor and one upper and lower case letter"
							label="confirmPassword" value="#{lDao.newPass}" maxlength="13"
							toggleMask="true">
							<f:validateRegex
								pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" />
						</p:password>
						<p:watermark for="confirmPassword" value="Confirm New password *" />
						<p:message for="confirmPassword" />
					</div>
					</div>
	
    
				
					<p:commandButton value="Change Password" style="margin:20px"
						action="#{lDao.changePassword(login,lDao.newPass)}" ajax="false" /> 
						<!-- <br /> -->

					</p:panel>
								<div class="ui-g">
    <div class="ui-lg-12 ui-md-3">
        <p:staticMessage severity="info" summary="INFO!" detail="Password must contains min 8 charactors which inludes one special charactor one upper and lower case letter" />
    </div>
    </div>
			</h:form>
		</div>
    </center>
</h:body>
</html>